{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/index.js","webpack:///external \"dotenv\"","webpack:///external \"Lingojs\""],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","getLingoSetupVariables","getKitId","getRelevantAssetContainers","require","config","log","console","lingo","spaceId","apiToken","process","env","SPACE_ID","API_TOKEN","_callee","kitName","kitUuid","_args","arguments","regeneratorRuntime","wrap","_context","prev","next","length","undefined","fetchKits","sent","forEach","v","kit_uuid","abrupt","t0","concat","stop","_callee2","kitId","extractTarget","kitVersion","uuids","outline","_args2","_context2","sections","fetchKitOutline","targetSec","values","originSec","headerUuids","headers","tsHeaderName","osHeader","push","uuid","_callee3","lsConfig","_args3","_context3","Error","setup"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","require(\"dotenv\").config();\nconst log = console.log;\nconst lingo = require(\"Lingojs\");\n\n/**\n * @param {int} spaceId :: Lingo Space ID (6 digits)\n * @param {int} apiToken :: Account root API\n */\nexport function getLingoSetupVariables(spaceId, apiToken) {\n\tif (spaceId == null || apiToken == null) {\n\t\treturn [process.env.SPACE_ID, process.env.API_TOKEN];\n\t} else {\n\t\treturn [spaceId, apiToken];\n\t}\n}\n\n/**\n *\n * @param {string} kitName\n */\n// kitName = \"Capswan - Mobile App - Style Guide\"\nexport async function getKitId(kitName = \"Capswan - Mobile App - Style Guide\") {\n\t//TODO: Add test for accounts which only have single kit\n\t//? Not sure whether this is going to be an issue given that the data\n\t//? structure would change based on how many kits are returned\n\tlet kitUuid;\n\ttry {\n\t\tlet kits = await lingo.fetchKits();\n\t\t// log(`kits: ${JSON.stringify(kits, null, 2)}`);\n\t\tkits.forEach(v => {\n\t\t\t// log(`v:${JSON.stringify(v, null, 2)}`);\n\t\t\tif (v.name === kitName) {\n\t\t\t\t// log(`v.name: ${v.name}`);\n\t\t\t\t// log(`v.kit_uuid:${v.kit_uuid}`);\n\t\t\t\tkitUuid = v.kit_uuid;\n\t\t\t}\n\t\t\t// log(`kitUuid: ${kitUuid}`);\n\t\t});\n\t\treturn kitUuid;\n\t} catch (err) {\n\t\tlog(`getKitId() ${err}`);\n\t}\n}\n\nexport async function getRelevantAssetContainers(\n\tkitId,\n\textractTarget,\n\tkitVersion = 0\n) {\n\ttry {\n\t\tlet uuids = { sections: [] };\n\t\tlet outline = await lingo.fetchKitOutline(kitId, kitVersion);\n\t\t// log(`outline: ${JSON.stringify(outline, null, 2)}`);\n\t\t// log(`kitId: ${kitId}`);\n\t\textractTarget.sections.forEach(targetSec => {\n\t\t\t// log(`targetSec:${JSON.stringify(targetSec, null, 2)}`);\n\t\t\t//TODO: Rename \"originSec\" to \"outlineSec\" for clarity\n\t\t\tObject.values(outline).forEach(originSec => {\n\t\t\t\t//TODO: Add a test for sections with duplicate names\n\t\t\t\t// log(`originSec: ${JSON.stringify(originSec, null, 2)}`);\n\t\t\t\tlet headerUuids = [];\n\t\t\t\tif (targetSec.name === originSec.name) {\n\t\t\t\t\t// log(`originSec.uuid: ${originSec.uuid}`);\n\t\t\t\t\tif (targetSec.hasOwnProperty(\"headers\")) {\n\t\t\t\t\t\t// log(`has headers: ${originSec.name}`);\n\t\t\t\t\t\t// log(\n\t\t\t\t\t\t// \t`targetSec headers: ${JSON.stringify(targetSec.headers, null, 2)}`\n\t\t\t\t\t\t// );\n\t\t\t\t\t\t//TODO: Add a test for headers with duplicate names\n\t\t\t\t\t\ttargetSec.headers.forEach(tsHeaderName => {\n\t\t\t\t\t\t\t// log(`tsHeaderName: ${tsHeaderName}`);\n\t\t\t\t\t\t\toriginSec.headers.forEach(osHeader => {\n\t\t\t\t\t\t\t\tif (tsHeaderName === osHeader.name) {\n\t\t\t\t\t\t\t\t\t// log(`${osHeader.name} uuid: ${osHeader.uuid}`);\n\t\t\t\t\t\t\t\t\theaderUuids.push(osHeader.uuid);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t// log(`osHeader: ${JSON.stringify(osHeader, null, 2)}`);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tuuids.sections.push({\n\t\t\t\t\t\tname: originSec.name,\n\t\t\t\t\t\tuuid: originSec.uuid,\n\t\t\t\t\t\theaders: headerUuids\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\t// log(JSON.stringify(uuids, null, 2));\n\t\treturn uuids;\n\t} catch (err) {\n\t\tlog(`getRelevantAssetContainers() ${err}`);\n\t}\n}\n\nexport default async function init(\n\tkitName = \"Capswan - Mobile App - Style Guide\",\n\textractTarget = null,\n\tspaceId = null,\n\tapiToken = null,\n\tkitVersion = 0\n) {\n\tif (extractTarget == null) {\n\t\tthrow Error(\"Extract Target is required\");\n\t}\n\t// log(`kitName: ${kitName}`);\n\tlet lsConfig = getLingoSetupVariables(spaceId, apiToken); //Allow overwriting of env variables\n\tlingo.setup(lsConfig[0], lsConfig[1]); //[0] => spaceId, [1] => apiToken\n\tlet kitId = await getKitId(kitName);\n\t// log(`kitId: ${kitId}`);\n\tawait getRelevantAssetContainers(kitId, extractTarget, kitVersion);\n}\n\n// init(\"Capswan - Mobile App - Style Guide\", capswanSampleExtractTargetOne);\n// init(\"Capswan - Mobile App - Style Guide\", capswanSampleExtractTargetTwo);\n// init(\"Test Me\", testMeExtractTargetOne);\n// init(\"Test Me\", testMeExtractTargetTwo);\n","module.exports = require(\"dotenv\");","module.exports = require(\"Lingojs\");"],"sourceRoot":""}